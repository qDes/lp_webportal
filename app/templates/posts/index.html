{% extends 'base.html' %}

{% block content %}
{% include "messages.html" %}
<div class="row">
	<div class="posts-index">
		<h2> Posts </h2>

	{{ pagination.links }}
		{% for post in posts_list.items %}

			<h3><a href="{{ url_for('posts.single_post', post_id=post.id | string) }}"> {{ post.title }} </a></h3>
			{% if current_user.is_admin %}

	        	<form action="{{ url_for('posts.delete_post') }}" method="POST" class=delete-entry>
						<input type="hidden" name="id_" value="{{ post.id }}">
						<input type="submit" value="Delete post" class="btn-danger"/>
				</form>
			{% endif %}
			<small> Post #{{ loop.index + pagination.skip }} </small> <br>
			<small> Author: {{ post.user.username }}</small> <br>

			{% for url in post.urls %}
				<img src="{{ url }}" class="img-fluid" alt="Responsive image">
			{% endfor %}
			<h4> {{ post.text }} </h4>
			<p> #{{ post.tag }} </p>
			<small> Comments: {{ post.comments|length }} </small>
			<p> {{ post.posted.strftime('%d/%m/%Y %H:%M') }} </p>
			<hr />
		{% endfor %}
	</div>
	</div>


{{ pagination.info }}
{{ pagination.links }}


{% endblock %}
		
